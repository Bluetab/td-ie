# TdIe

## Environment variables

### SSL conection

- DB_SSL: boolean value, to enable TSL config, by default is false.
- DB_SSL_CACERTFILE: path of the certification authority cert file "/path/to/ca.crt".
- DB_SSL_VERSION: available versions are tlsv1.2, tlsv1.3 by default is tlsv1.2.
- DB_SSL_CLIENT_CERT: Path to the client SSL certificate file.
- DB_SSL_CLIENT_KEY: Path to the client SSL private key file.
- DB_SSL_VERIFY: This option specifies whether certificates are to be verified.

To start your Phoenix server:

- Install dependencies with `mix deps.get`
- Create and migrate your database with `mix ecto.create && mix ecto.migrate`
- Start Phoenix endpoint with `mix phx.server`

Now you can visit [`localhost:4014`](http://localhost:4014) from your browser.

Ready to run in production? Please [check our deployment guides](http://www.phoenixframework.org/docs/deployment).

### Elastic bulk page size configuration

- BULK_PAGE_SIZE_INGESTS: default 1000

### Elastic aggregations

- The aggregation variables are defined as follows: AGG\_<AGGREGATION_NAME>\_SIZE

### ElasticSearch authentication

#### (Optional) Basic HTTP authentication

These environment variables will add the Authentication header on each request
with value `Basic <ES_USERNAME>:<ES_PASSWORD>`

- ES_USERNAME: Username
- ES_PASSWORD: Password

#### (Optional) ApiKey authentication

This environment variables will add the Authentication header on each request
with value `ApiKey <ES_API_KEY>`

- ES_API_KEY: ApiKey

#### (Optional) HTTP SSL Configuration (Normally required for ApiKey authentication)

These environment variables will configure CA Certificates for HTTPS requests

- ES_SSL: [true | false] required to activate following options
- ES_SSL_CACERTFILE: (Optional) Indicate the cacert file path. If not set, a certfile will be automatically generated by `:certifi.cacertfile()`
- ES_SSL_VERIFY: (Optional) [verify_peer | verify_none] defaults to `verify_none`

### ElasticSearch Force Merge Configuration

These environment variables control the force merge operation for ElasticSearch indices, which optimizes index performance by merging segments.

- `ES_WAIT_FOR_COMPLETION`:
  - **Purpose**: Controls whether the force merge operation should wait for completion before returning
  - **Default**: `nil` (no wait)
  - **Usage**: When set to `true`, the operation will wait until the force merge is complete before returning. When `false` or `nil`, the operation returns immediately and runs asynchronously
  - **Performance**: Setting to `true` ensures the operation is complete but may cause longer response times

- `ES_MAX_NUM_SEGMENTS`:
  - **Purpose**: Specifies the maximum number of segments to merge down to
  - **Default**: `5`
  - **Usage**: Controls how aggressively the force merge operation consolidates segments. Lower values result in fewer, larger segments
  - **Performance**: Fewer segments generally improve search performance but may increase memory usage during the merge operation

## Learn more

- Official website: http://www.phoenixframework.org/
- Guides: http://phoenixframework.org/docs/overview
- Docs: https://hexdocs.pm/phoenix
- Mailing list: http://groups.google.com/group/phoenix-talk
- Source: https://github.com/phoenixframework/phoenix
